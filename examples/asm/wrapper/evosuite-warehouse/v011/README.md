# V011

Version with:
- wrapper class with setters, step and getters
- generated by asmetal2java
- options: coverRules=true coverOutputs=false

I made some changes to the RegistroDiCassav4 class (generated class):
- Integrated the signature directly into the class.
- Made the static fields private so that they cannot be used from outside.

I created a single setter for each value of the static function "pizzaInserita", 
in this way I help evosuite not to raise exceptions

This time I left in the ATG class both the method that accepts a string and the new methods that 
deal with abstracts directly, to leave the choice to evosuite to decide what to do. 
This is because it can be useful to add a new abstract type via string, while the single 
methods refer to already existing types (and evosuite likes them more).

```
  public void set_pizzaInserita(String pizzaInserita) {
  this.execution.pizzaInserita
  .set(this.execution.Pizza_Class.get(this.execution.Pizza_elemsList.indexOf(pizzaInserita)));
  System.out.println("Set pizzaInserita = " + pizzaInserita);
  }
  
  public void set_pizzaInserita_margherita() {
      this.execution.pizzaInserita.set(RegistroDiCassav4.margherita);
      System.out.println("Set pizzaInserita = " + "margherita");
  }

  public void set_pizzaInserita_capricciosa() {
      this.execution.pizzaInserita.set(RegistroDiCassav4.capricciosa);
      System.out.println("Set pizzaInserita = " + "capricciosa");
  }

  public void set_pizzaInserita_marinara() {
      this.execution.pizzaInserita.set(RegistroDiCassav4.marinara);
      System.out.println("Set pizzaInserita = " + "marinara");
  }
  
```
## Problems
Evosuite again creates try catch blocks without exploring the subsequent behavior

```
  registroDiCassav4_ATG0.step();
    assertEquals("Inserisci il nome di una nuova pizza:", registroDiCassav4_ATG0.get_outMess());
    assertEquals(0, registroDiCassav4_ATG0.get_totale());
    assertEquals(RegistroDiCassav4.Stati.ALTRAPIZZA_SELEZIONATA, registroDiCassav4_ATG0.get_statoCassa());
    
    // Undeclared exception!
    try { 
      registroDiCassav4_ATG0.step();
      fail("Expecting exception: NullPointerException");
    
    } catch(NullPointerException e) {
       //
       // no message in exception (getMessage() returned null)
       //
       verifyException("org.evoservice.wrapper.RegistroDiCassav4", e);
    }
```
However, this does not always happen, because there are cases where evosuite generates a scenario 
correctly without creating try catch blocks and using the methods we have created,
improving the overall coverage.
```
  registroDiCassav4_ATG0.set_pizzaInserita_margherita();
  ...
  registroDiCassav4_ATG0.step();
```
It must be said that this behavior also occurred with the single method that accepts the string, 
having created these new methods seems to reduce the probability that evosuite creates 
try catch blocks but still present.

## How to
```shell
mvn compile
```
```shell
mvn dependency:copy-dependencies -DincludeScope=runtime
```
```shell
java -jar evosuite-1.0.6.jar -setup target/classes target/dependency/commons-collections-3.2.2.jar
```
```shell
java -jar evosuite-1.0.6.jar -class org.evoservice.wrapper.RegistroDiCassav4_ATG -criterion LINE:BRANCH:WEAKMUTATION -Dminimize=true -Dassertion_strategy=all -Dsearch_budget=60 -Dcatch_undeclared_exceptions=false
```

### log
* EvoSuite 1.0.6
* Going to generate test cases for class: org.evoservice.wrapper.RegistroDiCassav4_ATG
* Starting client
* Properties loaded from C:\Users\isaac\Documents\GitHub\evosuite-tutorial\examples\asm\wrapper\evosuite-files\evosuite.properties
* Connecting to master process on port 12357
* Analyzing classpath:
  - target/classes
  - target/dependency/commons-collections-3.2.2.jar
* Finished analyzing classpath
* Generating tests for class org.evoservice.wrapper.RegistroDiCassav4_ATG
* Test criteria:
  - Line Coverage
  - Branch Coverage
* Setting up search algorithm for whole suite generation
* Total number of test goals:
  - Line 116
  - Branch 62
    [Progress:>                             0%] [Cov:>                                  0%]* Using seed 1729587357587
* Starting evolution
  [Progress:==============================100%] [Cov:==================================>98%]
* Search finished after 61s and 584 generations, 163240 statements, best individual has fitness: 1.5
* Minimizing test suite
* Going to analyze the coverage criteria
* Coverage analysis for criterion LINE
* Coverage of criterion LINE: 99%
* Total number of goals: 116
* Number of covered goals: 115
* Coverage analysis for criterion BRANCH
* Coverage of criterion BRANCH: 98%
* Total number of goals: 62
* Number of covered goals: 61
* Generated 12 tests with total length 54
* Resulting test suite's coverage: 99% (average coverage for all fitness functions)
* Generating assertions
* Compiling and checking tests
* Writing JUnit test case 'RegistroDiCassav4_ATG_ESTest' to evosuite-tests
* Done!

* Computation finished

## Scenario
### test0
```
```
#### Avalla
```
```
